<?phpnamespace app\common\lib\traits;use think\Cache;trait tokenTrait{    private static $TOKEN_CACHE_NAME = 'token_';    //设置令牌    public function setToken()    {        $this->loginKey=$this->id;        Cache::set(self::$TOKEN_CACHE_NAME.$this->loginKey,$this->createToken(),5*60);    }    //取令牌    public function getToken()    {      return  Cache::get(self::$TOKEN_CACHE_NAME.$this->loginKey);    }    //消除令牌    public function clearToken()    {        Cache::dec(self::$TOKEN_CACHE_NAME.$this->loginKey);    }    //退出    public function logout()    {        $this->clearToken();    }    //通过token,user_id加载数据    public function loginByToken($token)    {        $token_cache = $this->getToken();       if( $token_cache && $token == $token_cache ) {            return true;        }        return false;    }    // 创建TOken    private static function createToken()    {        return md5(microtime(). sha1(self::$TOKEN_CACHE_NAME).rand(1,100000));    }    //是否已登入    public function isLogin() {        return $this->LoginKey ? true : false;    }}?>